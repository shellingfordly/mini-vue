<style>
  .red {
    color: red;
  }
</style>

<div id="app"></div>

<script type="module">
  import { reactive, effect, createApp, h } from "../lib/mini-vue.esm.js";

  // const count = reactive({
  //   value: 0,
  // });

  // effect(() => {
  //   input.value = count.value;
  //   console.log(count.value);
  // });

  // btn.onclick = function onAdd() {
  //   count.value++;
  // };

  const Foo = {
    name: "Foo",
    setup(props, { emit }) {
      console.log("Foo props ", props);
      // props.count++

      function onClick() {
        emit("add", "add");
        emit("add-foo", "add-foo");
      }

      return { onClick };
    },
    render() {
      return h("div", {}, [
        h("div", {}, "I am Foo."),
        h(
          "button",
          {
            onClick: this.onClick,
          },
          "add"
        ),
      ]);
    },
  };

  const App = {
    render() {
      const self = this;

      return h("div", { class: "root" }, [
        h(
          "div",
          {
            class: "red",
            onClick() {
              console.log(this, `Hi, ${self.message}!`);
            },
          },
          `Hi, ${this.message}!`
        ),
        h("div", {}, `This is ${this.message}!`),
        h(Foo, {
          count: 1,
          onAdd(...args) {
            console.log(...args);
          },
          onAddFoo(...args) {
            console.log(...args);
          },
        }),
      ]);
    },
    setup() {
      return {
        message: "vue",
      };
    },
  };

  const app = document.getElementById("app");
  createApp(App).mount(app);
</script>
