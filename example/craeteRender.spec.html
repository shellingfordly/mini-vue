<script src="https://pixijs.download/release/pixi.js"></script>

<script type="module">
  import { createAppAPI, createRenderer, h } from "../lib/mini-vue.esm.js";
  console.log(PIXI);

  const App = {
    setup() {
      return {};
    },
    render() {
      return h("rect", { x: 100, y: 100 });
    },
  };

  const container = new PIXI.Application({
    width: 500,
    height: 500,
  });

  document.body.append(container.view);

  const renderer = createRenderer({
    createElement() {
      const rect = new PIXI.Graphics();
      rect.beginFill(0xff0000);
      rect.drawRect(0, 0, 100, 100);
      rect.endFill();
      return rect;
    },
    patchProps(el, key, value) {
      el[key] = value;
    },
    insert(el, parent) {
      parent.addChild(el);
    },
  });

  renderer.createApp(App).mount(container.stage);
</script>
